(this["webpackJsonpvideo-meeting-front"]=this["webpackJsonpvideo-meeting-front"]||[]).push([[0],{124:function(e,t,a){},141:function(e,t,a){},145:function(e,t,a){},157:function(e,t,a){},160:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(11),i=a.n(r),c=a(15),s=a(5),l=a(2),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{chat:"on",camera:"on",fullscreen:"on",mic:"on",screenshare:"on"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"click_chat":return Object(l.a)(Object(l.a)({},e),{},{chat:t.value});case"click_camera":return Object(l.a)(Object(l.a)({},e),{},{camera:t.value});case"click_fullscreen":return Object(l.a)(Object(l.a)({},e),{},{fullscreen:t.value});case"click_mic":return Object(l.a)(Object(l.a)({},e),{},{mic:t.value});case"click_screenshare":return Object(l.a)(Object(l.a)({},e),{},{screenshare:t.value});default:return e}},m=a(8),d=["#99EE99E0","#FF88EEE0","#EEFF88E0","#AAAAFFE0","#DD9999E0","#DDFFDDE0","#88FFDDE0","#DDDDFFE0","#FFDDDDE0","#CEECEEE0","#FFEEDDE0","#eeeeeeE0","#cceeeeE0","#eecceeE0","#eeeeccE0","#cccceeE0","#eeccccE0","#cceeccE0"],v={};function f(){var e=d,t=function(t){e=e.filter((function(e){return e!==v[t]}))};for(var a in v)t(a);return e[0]}var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"user_add":if(e.find((function(e){return e.id===t.value.id})))return console.log("Duplicate user error!",t.value),e;var a=f();return v[t.value.id]=a,[].concat(Object(m.a)(e),[Object(l.a)(Object(l.a)({},t.value),{},{color:a,media:{mic:"on",camera:"on"}})]);case"user_remove":return delete v[t.value.id],e.filter((function(e){return e.id!==t.value.id}));case"user_media":return e.map((function(e){return e.id!==t.value.id?e:"mic"===t.value.type?Object(l.a)(Object(l.a)({},e),{},{media:Object(l.a)(Object(l.a)({},e.media),{},{mic:t.value.status})}):"camera"===t.value.type?Object(l.a)(Object(l.a)({},e),{},{media:Object(l.a)(Object(l.a)({},e.media),{},{camera:t.value.status})}):Object(l.a)(Object(l.a)({},e),{},{media:Object(l.a)(Object(l.a)({},e.media),{},{screenshare:t.value.status})})}));default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"chat_add":return setTimeout((function(){var e=document.getElementsByClassName("chatitemparent");e.length>0&&e[e.length-1].scrollIntoView({behavior:"smooth"})}),200),[].concat(Object(m.a)(e),[Object(l.a)(Object(l.a)({},t.value),{},{key:e.length,color:v[t.value.userid]})]);default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{bgMoving:!1,videos:[],images:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"backgound_moving":return Object(l.a)(Object(l.a)({},e),{},{bgMoving:t.value});case"youtube_add":var a=[].concat(Object(m.a)(e.videos),[t.value]);return Object(l.a)(Object(l.a)({},e),{},{videos:a});case"youtube_remove":var n=e.videos.filter((function(e){return e.value!==t.value}));return Object(l.a)(Object(l.a)({},e),{},{videos:n});case"youtube_position":var o=e.videos.map((function(e){return e.name!==t.value.name?e:Object(l.a)(Object(l.a)({},e),t.value)}));return Object(l.a)(Object(l.a)({},e),{},{videos:o});case"youtube_play":var r=e.videos.map((function(e){return e.name!==t.value.name?e:Object(l.a)(Object(l.a)({},e),t.value)}));return Object(l.a)(Object(l.a)({},e),{},{videos:r});case"image_add":var i=[].concat(Object(m.a)(e.images),[t.value]);return Object(l.a)(Object(l.a)({},e),{},{images:i});case"image_remove":var c=e.images.filter((function(e){return e.value!==t.value}));return Object(l.a)(Object(l.a)({},e),{},{images:c});case"image_position":var s=e.images.map((function(e){return e.name!==t.value.name?e:Object(l.a)(Object(l.a)({},e),t.value)}));return Object(l.a)(Object(l.a)({},e),{},{images:s});default:return e}},h=Object(c.b)({buttons:u,users:g,chats:p,screens:b}),y=(a(89),a(77)),E=a(12),w=(a(90),a(91),a(23)),N=a(19),O=(a(20),function(){function e(){Object(w.a)(this,e)}return Object(N.a)(e,null,[{key:"show",value:function(e){window.$("#"+e).plainModal("open")}}]),e}()),k=a(3),j=(a(92),a(55)),S=a(56),I=function(e){return o.a.createElement("div",{className:"fadeIn ".concat(e.spinning)},o.a.createElement(j.a,{icon:S.a,size:e.size}))},x=a(57),C=a.n(x),_=a(58),M=a.n(_);var P=function(e){var t=Object(n.useState)(!0),a=Object(k.a)(t,2),r=a[0],i=(a[1],Object(n.useState)(!1)),c=Object(k.a)(i,2),s=c[0],u=c[1],m=Object(n.useState)(2),d=Object(k.a)(m,2),v=d[0],f=d[1],g=Object(n.useState)(""),p=Object(k.a)(g,2),b=p[0],h=p[1],y=Object(n.useState)(""),E=Object(k.a)(y,2),w=E[0],N=E[1],O=Object(n.useState)(null),j=Object(k.a)(O,2),S=j[0],x=j[1],_=Object(n.useState)({email:"Enter your Email!",space:"Enter your Sspace Name!"}),P=Object(k.a)(_,2),D=P[0],T=P[1],R=RegExp(/^(([^<>()\],;:\s@]+([^<>()\],;:\s@]+)*)|(.+))@(([^<>()[\],;:\s@]+)+[^<>()[\],;:\s@]{2,})$/i),F=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value;switch(a){case"space":D.space=n.length<5?"Space Name must be 5 characters long!":"";break;case"email":D.email=R.test(n)?"":"Email is not valid!"}T(Object(l.a)(Object(l.a)({},D),{},{name:n}))},B=function(e){e.preventDefault(),window.$("#roomdialog").plainModal("close"),setTimeout((function(){u(!1),f(2)}),100)};Object(n.useEffect)((function(){}),[v]);var A=o.a.createElement("form",{"data-v-9deb956c":"",className:"form",onSubmit:function(e){return e.preventDefault(),u(!0),void fetch("".concat("https://webrtc.bcisummit.com","/email"),{method:"pOSt",headers:{aCcePt:"aPpliCaTIon/JsOn","cOntENt-type":"applicAtion/JSoN"},body:JSON.stringify({email:b.value,space:w.value})}).then((function(e){return e.json()})).then((function(e){u(!1),f(e.status),S.reset()})).catch((function(e){return console.log(e)}))},ref:function(e){return x(e)},noValidate:!0},o.a.createElement("div",{"data-v-9deb956c":"",className:"label"},"Your Email"),o.a.createElement("input",{"data-v-9deb956c":"",type:"email",name:"email",className:"email",ref:function(e){return h(e)},onChange:function(e){return F(e)},noValidate:!0}),D.email.length>0&&o.a.createElement("span",{className:"error"},D.email),o.a.createElement("div",{"data-v-9deb956c":"",className:"label"},"Space Name"),o.a.createElement("input",{"data-v-9deb956c":"",type:"text",name:"space",className:"space-name",ref:function(e){return N(e)},onChange:function(e){return F(e)},noValidate:!0}),D.space.length>0&&o.a.createElement("span",{className:"error"},D.space),o.a.createElement("div",{id:"recaptcha"}),o.a.createElement("div",{"data-v-9deb956c":"",className:"buttons"},o.a.createElement("button",{"data-v-9deb956c":"",className:"cancel",onClick:function(e){return B(e)}},"CANCEL"),o.a.createElement("button",{"data-v-9deb956c":"",type:"submit",className:"create",disabled:0!==function(e){var t=0;return delete e.name,Object.values(e).forEach((function(e){e.length>0&&(t+=1)})),t}(D)||!r},s?o.a.createElement(I,{size:"lg",spinning:"spinning"}):"CREATE"))),z=o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{"data-v-9deb956c":"",className:"created"},o.a.createElement("img",{src:C.a,alt:"successsvg"}),o.a.createElement("div",{"data-v-9deb956c":"",className:"text"},"Email sent!",o.a.createElement("h4",{"data-v-9deb956c":""},"Please check your inbox to confirm."))),o.a.createElement("div",{"data-v-9deb956c":"",className:"buttons"},o.a.createElement("button",{"data-v-9deb956c":"",className:"cancel",onClick:function(e){return B(e)}},"GOT IT!"))),V=o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{"data-v-9deb956c":"",className:"created"},o.a.createElement("img",{src:M.a,alt:"error.svg"}),o.a.createElement("div",{"data-v-9deb956c":"",className:"text",style:{color:"#ff0000"}},"Whoops!",o.a.createElement("h4",{"data-v-9deb956c":""},"Already registered."))),o.a.createElement("div",{"data-v-9deb956c":"",className:"buttons"},o.a.createElement("button",{"data-v-9deb956c":"",className:"cancel",onClick:function(e){return B(e)}},"GOT IT!")));return o.a.createElement("div",{"data-v-9deb956c":"","data-v-5c9875d0":"",id:"roomdialog","aria-expanded":"true","data-modal":"create-space",className:"create-space-modal v--modal-overlay roomdialog"},o.a.createElement("div",{className:"v--modal-background-click"},o.a.createElement("div",{className:"v--modal-top-right"}),o.a.createElement("div",{role:"dialog","aria-modal":"true",className:"v--modal-box modal m-dialog"},o.a.createElement("div",{"data-v-9deb956c":"",className:"header"},"Create Space"),2===v?A:0===v?z:V)))},D=o.a.memo((function(e){return o.a.createElement("div",{"data-v-3de1367d":"",className:"footer"},o.a.createElement("div",{"data-v-3de1367d":"",className:"links"},o.a.createElement("a",{"data-v-3de1367d":"",href:"https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=seniordev119@gmail.com",className:"support-link",target:"_blank",rel:"noopener noreferrer"},"seniordev119@gmail.com"),o.a.createElement("span",{"data-v-3de1367d":"",className:"phone-hidden"},"\xa0\xa0\xa0\xa0\u2219\xa0\xa0\xa0\xa0"),o.a.createElement("div",{"data-v-3de1367d":"",className:"legal"},o.a.createElement("a",{"data-v-3de1367d":"",href:"https://www.notion.so/spatialchat/SpatialChat-Privacy-Policy-899c953609d24d3ebbd619506becaa7f",target:"_blank",rel:"noopener noreferrer"},"Privacy Policy"),o.a.createElement("span",{"data-v-3de1367d":""},"\xa0\xa0\xa0\xa0\u2219\xa0\xa0\xa0\xa0"),o.a.createElement("a",{"data-v-3de1367d":"",href:"https://www.notion.so/spatialchat/Terms-of-Service-6f9243e5e25346cfa73df618c90de4fb",target:"_blank",rel:"noopener noreferrer"},"Terms of Service"))))}));var T=function(e){return o.a.createElement("div",{"data-v-5c9875d0":"",className:"home"},o.a.createElement("div",{"data-v-5c9875d0":"",className:"buttons"},o.a.createElement("button",{"data-v-5c9875d0":"",onClick:function(){O.show("roomdialog")},className:"button"},"Create Space")),o.a.createElement(D,null),o.a.createElement(P,null))},R=a(59),F=a.n(R),B=a(24),A=a(25),z=a.n(A),V=a(26),L=a.n(V),U=a(60),Q=a.n(U);a(48);var $=function(e){var t=Object(n.useState)(!1),a=Object(k.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)(!1),s=Object(k.a)(c,2),l=s[0],u=s[1],m=Object(n.useState)(""),d=Object(k.a)(m,2),v=d[0],f=d[1],g=B.parse(e.location.search);return o.a.createElement("div",{"data-v-12a888fb":"",className:"space"},o.a.createElement("div",{"data-v-2db9ff64":"",className:"app-header","data-v-12a888fb":""},o.a.createElement("a",{"data-v-2db9ff64":"",href:"/",target:"_blank"},o.a.createElement("img",{"data-v-2db9ff64":"",className:"logo",src:z.a,alt:"logosvg",style:{display:"none"}}),o.a.createElement("img",{"data-v-2db9ff64":"",className:"logo-small",src:L.a,alt:"logosmallsvg",style:{display:"none"}})),o.a.createElement("div",{"data-v-2f32af68":"",className:"space-name"},g.space)),o.a.createElement("div",{"data-v-a74c9690":"","data-v-12a888fb":"",className:"entrance ent-div"},o.a.createElement("form",{"data-v-a74c9690":"",className:"form",onSubmit:function(t){return t.preventDefault(),u(!0),window.localStorage.setItem("o",!0),window.localStorage.setItem("t","video-meeting"),window.localStorage.setItem("r",g.space),window.localStorage.setItem("r","tryme"),window.localStorage.setItem("userName",v),void setTimeout((function(){e.history.push("/conference?space="+g.space+"&uname="+v)}),2500)}},o.a.createElement("input",{"data-v-a74c9690":"",type:"text",placeholder:"Your Name",className:"name",onChange:function(e){return function(e){e.preventDefault();var t=e.target.value;t.length>0?(i(!0),f(t)):i(!1)}(e)}}),o.a.createElement("button",{"data-v-a74c9690":"",type:"submit",disabled:!r,className:"pointer"},l?o.a.createElement(F.a,{name:"three-bounce"}):o.a.createElement("img",{src:Q.a,alt:"joinbtn"})))),o.a.createElement(D,null))},K=a(39),q=a(13),J=a.n(q),W=a(61),X=a(29),Y=function(){function e(){Object(w.a)(this,e),this.client=null,this.roomName="",this.userName="",this.myPosition={x:0,y:0},this.youtubes=[],this.images=[],this.enableScreenShare=!0,this.enableCamera=!0,this.enableMic=!0,this.videoQualities=[{text:"SSM (30p - 128Kb/s)",value:{width:160,height:120,frameRate:10}},{text:"SM (120p - 256Kb/s)",value:{width:320,height:240,frameRate:10}},{text:"SD (360p - 1Mb/s)",value:{width:480,height:360,frameRate:10}},{text:"HD (720p - 2Mb/s)",value:{width:1280,height:720,frameRate:10}},{text:"Full HD (1080p - 4Mb/s)",value:{width:1920,height:1080,frameRate:15}}],this.currentVideoQuality=this.videoQualities[1],this.audioQualities=[{text:"Narrow Band (16Kb/s)",value:{sampleSize:8,channelCount:1}},{text:"Wide Band (64Kb/s)",value:{sampleSize:8,channelCount:2}},{text:"Full Band (256Kb/s)",value:{sampleSize:16,channelCount:2}}],this.currentAudioQuality=this.audioQualities[1],console.log("WebRTC class was initialized.")}return Object(N.a)(e,null,[{key:"getInstance",value:function(){return null===e._instance&&(e._instance=new e),e._instance}}]),Object(N.a)(e,[{key:"checkBrowser",value:function(){return window.Login._browserCompatCheck()}},{key:"getUserName",value:function(){var e=window.localStorage.getItem("userName");return e||""}},{key:"setUserName",value:function(e){window.localStorage.setItem("userName",e)}},{key:"getRoomName",value:function(){return this.roomName}},{key:"generateRoomName",value:function(){return window.generateRoomName()}},{key:"createRoom",value:function(e,t){window.localStorage.setItem("o",!0),window.localStorage.setItem("t","maciel-video-meeting"),window.localStorage.setItem("r",t),window.location.href="/room?username="+this.getUserName()}},{key:"joinRoom",value:function(e,t){window.localStorage.setItem("o",!1),window.localStorage.setItem("t","maciel-video-meeting"),window.localStorage.setItem("r",t),window.location.href="/room?username="+this.getUserName()}},{key:"createAudioMeter",value:function(t){var a=new AudioContext,n=a.createMediaStreamSource(t),o=a.createScriptProcessor(16384,1,1);n.connect(o),o.connect(a.destination),o.onaudioprocess=function(t){var a=t.inputBuffer;if(a.numberOfChannels>0){for(var n=a.getChannelData(0),o=n.length,r=0,i=0;i<o;i+=16)r+=Math.abs(n[i]);var c=Math.sqrt(16*r/o);window.easyrtc.sendPeerMessage({targetRoom:e.getInstance().roomName},"audio-meter",{rms:c})}}}},{key:"toggleCamera",value:function(e){this.enableCamera=e,window.easyrtc.enableCamera(e),this.client&&this.client.sendPeerMessage({room:this.roomName},"media-presence",{type:"camera",status:e?"on":"off"})}},{key:"toggleMic",value:function(e){this.enableMic=e,window.easyrtc.enableMicrophone(e),this.client&&this.client.sendPeerMessage({room:this.roomName},"media-presence",{type:"mic",status:e?"on":"off"})}},{key:"toggleScreenShare",value:function(t){this.enableScreenShare=t,t?e.getInstance().onStreamConfigurationChange():e.getInstance().onSetScreenCapture()}},{key:"youtubePosition",value:function(e){this.youtubes.forEach((function(t){t.name===e.name&&(t.transform=e.transform)})),this.client&&this.client.sendPeerMessage({room:this.roomName},"youtube-position",e)}},{key:"youtubePlay",value:function(e){this.client&&this.client.sendPeerMessage({room:this.roomName},"youtube-play",e)}},{key:"youtubeAdd",value:function(t){t.transform="translate(0px, 0px)",e.getInstance().youtubes.push(t),e.getInstance().client&&e.getInstance().client.sendPeerMessage({room:this.roomName},"youtube-add",t)}},{key:"youtubeRemove",value:function(t){e.getInstance().client&&e.getInstance().client.sendPeerMessage({room:this.roomName},"youtube-remove",t),e.getInstance().youtubes=e.getInstance().youtubes.filter((function(e){return e.name!==t.name}))}},{key:"imagePosition",value:function(e){this.images.forEach((function(e){e.name===e.name&&(e.transform=e.transform)})),this.client&&this.client.sendPeerMessage({room:this.roomName},"image-position",e)}},{key:"imageAdd",value:function(t){t.transform="translate(0px, 0px)",e.getInstance().images.push(t),e.getInstance().client&&e.getInstance().client.sendPeerMessage({room:this.roomName},"image-add",t)}},{key:"imageRemove",value:function(t){e.getInstance().client&&e.getInstance().client.sendPeerMessage({room:this.roomName},"image-remove",t),e.getInstance().images=e.getInstance().images.filter((function(e){return e.name!==t.name}))}},{key:"closeClient",value:function(){this.dispatch({type:"user_remove",value:{id:"me"}}),window.easyrtc.disconnect()}},{key:"sendFile",value:function(e,t,a){var n=window.$("#file");n.one("change",(function(){var o=n[0].files[0];if(0!==o.size)if(o.size>Math.pow(2,21))alert("File size can't be larger than 2MB.");else{var r=new FileReader;r.onload=function(n){var r={name:o.name,type:o.type,size:o.size,binaryContents:n.target.result};a({type:"chat_add",value:{username:"Me",userid:"me",text:'Send a file "'.concat(o.name,'" to "').concat(t,'".'),align:"right",time:Date.now()}}),window.easyrtc.sendDataWS(e,"file",r)},r.readAsDataURL(o),n[0].value=""}else alert("Empty file selected.")})),n[0].click()}},{key:"exitRoom",value:function(){"true"===this.owner&&(this.sendMessage("Room closed."),window.easyrtc.sendPeerMessage({targetRoom:e.getInstance().roomName},"close"),this.dispatch({type:"chat_add",value:{username:"Me",userid:"me",text:"Room closed.",align:"right",time:Date.now()}})),this.closeClient()}},{key:"updateStreamMode",value:function(){var e={video:!1,audio:!1};this.currentVideoDevice&&(e.video={},e.video.deviceId=this.currentVideoDevice.value,e.video.width=this.currentVideoQuality.value.width,e.video.height=this.currentVideoQuality.value.height,e.video.frameRate=this.currentVideoQuality.value.frameRate),this.currentAudioDevice&&(e.audio={},e.audio.deviceId=this.currentAudioDevice.value,e.audio.sampleSize=this.currentAudioQuality.value.sampleSize,e.audio.channelCount=this.currentAudioQuality.value.channelCount),this.currentContraintMode=e}},{key:"onStreamConfigurationChange",value:function(){if(this.enableScreenShare){this.updateStreamMode();var t=window.easyrtc.getLocalStream();t.getTracks().forEach((function(e){e.stop()})),navigator.mediaDevices.getUserMedia(this.currentContraintMode).then((function(a){a.getTracks().forEach((function(e){t.addTrack(e)}));var n=document.getElementById(t.id);n&&window.easyrtc.setVideoObjectSrc(n,a),window.easyrtc.enableCamera(e.getInstance().enableCamera),window.easyrtc.enableMicrophone(e.getInstance().enableMic);var o=window.easyrtc.getPeerConnections();for(var r in o){o[r].pc.getSenders().map((function(e){return e.replaceTrack(a.getTracks().find((function(t){return t.kind===e.track.kind})))}))}}))}else{var a=window.easyrtc.getPeerConnections();for(var n in a){a[n].pc.getSenders().map((function(t){return t.replaceTrack(e.getInstance().screenStream.getTracks().find((function(e){return e.kind===t.track.kind})))}))}}}},{key:"updateDevices",value:function(){var e=Object(X.a)(J.a.mark((function e(){var t,a,n,o,r,i;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[],a=[],e.next=5,navigator.mediaDevices.enumerateDevices();case 5:n=e.sent,o=Object(W.a)(n);try{for(i=function(){var e=r.value;if("audioinput"===e.kind){var n=t.filter((function(t){return 0===t.text.indexOf(e.label)}));t=n.length>0?[].concat(Object(m.a)(t),[{text:e.label+"-"+n.length,value:e.deviceId}]):[].concat(Object(m.a)(t),[{text:e.label,value:e.deviceId}])}if("videoinput"===e.kind){var o=a.filter((function(t){return 0===t.text.indexOf(e.label)}));a=o.length>0?[].concat(Object(m.a)(a),[{text:e.label+"-"+o.length,value:e.deviceId}]):[].concat(Object(m.a)(a),[{text:e.label,value:e.deviceId}])}},o.s();!(r=o.n()).done;)i()}catch(c){o.e(c)}finally{o.f()}this.videoDevices=a,this.audioDevices=t,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"startConference",value:function(){var t=Object(X.a)(J.a.mark((function t(a,n,o,r){var i=this;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("start conference: ",r),this.userName=r,this.roomName=o||window.localStorage.getItem("r"),this.roomName){t.next=6;break}return window.location.href="/room?space="+this.roomName,t.abrupt("return");case 6:return this.dispatch=a,t.next=9,this.updateDevices();case 9:this.currentVideoDevice=0===this.videoDevices.length?null:this.videoDevices[0],this.currentAudioDevice=0===this.audioDevices.length?null:this.audioDevices[0],this.owner=window.localStorage.getItem("o"),this.token=window.localStorage.getItem("t"),window.localStorage.removeItem("o"),window.localStorage.removeItem("t"),window.localStorage.removeItem("r"),window.easyrtc.enableDataChannels(!1),window.VTCCore.initialize({cameraIsEnabled:!0,micIsEnabled:!0}).onError((function(e){console.log("error---",e)})).onPeerMessage((function(t,n,o,r){if("chat"===o)a({type:"chat_add",value:{username:t.idToName(n),userid:n,text:r,align:"left",time:Date.now()}});else if("set_peer_position"===o)e.getInstance().updatePeerPosition(n,r.position);else if("youtube-position"===o)a({type:"youtube_position",value:{username:t.idToName(n),name:r.name,videoId:n,transform:r.transform,curtime:r.curtime}});else if("youtube-play"===o)a({type:"youtube_play",value:{name:r.name,videoplay:r.videoplay}});else if("youtube-add"===o)console.log("youtube-add: ",r),a({type:"youtube_add",value:{name:r.name,id:n,value:r.videoId,transform:r.transform,curtime:r.curtime,timechange:r.timechange}});else if("youtube-remove"===o)a({type:"youtube_remove",value:r.value});else if("image-position"===o)a({type:"image_position",value:{username:t.idToName(n),name:r.name,imageid:n,transform:r.transform}});else if("image-add"===o)a({type:"image_add",value:{name:r.imageName,id:n,value:r.imageId,transform:r.transform}});else if("image-remove"===o)a({type:"image_remove",value:r.value});else if("media-presence"===o&&"string"===typeof r.type&&"string"===typeof r.status)a({type:"user_media",value:{id:n,type:r.type,status:r.status}});else if("debug"===o)console.log(o,n,r);else{if("mic-control"===o&&"boolean"===typeof r.enabled)return void console.log(t,n,o,r);if("audio-meter"===o);else if("file"===o){for(var i=r.binaryContents.split(","),c=i[0].match(/:(.*?);/)[1],s=atob(i[1]),l=s.length,u=new Uint8Array(l);l--;)u[l]=s.charCodeAt(l);var m=new Blob([u],{type:c});a({type:"chat_add",value:{username:t.idToName(n),userid:n,html:'"'.concat(t.idToName(n),"\" sent a file.<br><a href='").concat(URL.createObjectURL(m),"' target='_blank'>Click here to download ").concat(r.name,"(").concat(r.size,"bytes)"),align:"left",time:Date.now()}})}else console.log("peerMessage => got a peer message that is unexpected"),console.log("            => peerId:  "+n),console.log("            =>   name: "+t.idToName(n)),console.log("            => msgType: "+o),console.log("            => content: "+JSON.stringify(r))}})).onStreamAccept((function(t,n,o){var r=t.idToName(n);a({type:"user_add",value:{id:n,name:r,width:100,height:100,stream:o}}),e.getInstance().onStreamConfigurationChange(),window.easyrtc.sendServerMessage("get_peer_position",n,(function(t,a){e.getInstance().updatePeerPosition(n,a)}),(function(t,a){e.getInstance().updatePeerPosition(n,{x:0,y:0})})),e.getInstance().youtubes.forEach((function(t){e.getInstance().client.sendPeerMessage({rtcId:n},"youtube-add",t)})),e.getInstance().images.forEach((function(t){e.getInstance().client.sendPeerMessage({rtcId:n},"image-add",t)}))})).onStreamClose((function(e,t){a({type:"user_remove",value:{id:t}})})).connect(r,this.roomName,(function(t){console.log("start local stream: ",r,i.roomName);var n=t.getLocalStream();a({type:"user_add",value:{id:"me",name:"Me",width:100,height:100,stream:n}}),e.getInstance().onStreamConfigurationChange(),e.getInstance().client=t,window.easyrtc.sendServerMessage("get_my_position",t.getId(),(function(t,a){e.getInstance().updateMyPosition(a)}),(function(t,a){e.getInstance().updateMyPosition({x:0,y:0})}))}));case 18:case"end":return t.stop()}}),t,this)})));return function(e,a,n,o){return t.apply(this,arguments)}}()},{key:"sendMessage",value:function(e){this.client.sendPeerMessage({room:this.roomName},"chat",e)}},{key:"onSetScreenCapture",value:function(){var t=this;this.updateStreamMode();var a=window.easyrtc.getLocalStream(),n=this;navigator.mediaDevices.getDisplayMedia({video:{width:1920,height:1080,frameRate:5}}).then(function(){var n=Object(X.a)(J.a.mark((function n(o){var r,i,c,s,l;return J.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.getTracks().forEach((function(e){e.stop()})),n.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:r=n.sent,o.getVideoTracks()[0].onended=function(){t.toggleScreenShare(!0),t.dispatch({type:"click_screenshare",value:"on"}),t.dispatch({type:"user_media",value:{id:"me",type:"screenshare",status:"on"}}),document.getElementById("screenshare").src="/static/media/screenshare-on.44d81ce8.svg"},o.addTrack(r.getAudioTracks()[0]),o.getTracks().forEach((function(e){a.addTrack(e)})),e.getInstance().screenStream=o,i=document.getElementById(a.id),window.easyrtc.setVideoObjectSrc(i,o),c=window.easyrtc.getPeerConnections(),n.t0=J.a.keys(c);case 12:if((n.t1=n.t0()).done){n.next=20;break}if(s=n.t1.value,!(l=c[s]).cancelled){n.next=17;break}return n.abrupt("continue",12);case 17:l.pc.getSenders().map((function(e){return e.replaceTrack(o.getTracks().find((function(t){return t.kind===e.track.kind})))})),n.next=12;break;case 20:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.log(e),"NotFoundError"==e.name||"DevicesNotFoundError"==e.name?console.log("NotFoundError, DevicesNotFoundError"):"NotReadableError"==e.name||"TrackStartError"==e.name?console.log("NotReadableError, TrackStartError"):"OverconstrainedError"==e.name||"ConstraintNotSatisfiedError"==e.name?console.log("OverconstrainedError, ConstraintNotSatisfiedError"):"NotAllowedError"==e.name||"PermissionDeniedError"==e.name?(console.log("NotAllowedError, PermissionDeniedError"),n.toggleScreenShare(!0),n.dispatch({type:"click_screenshare",value:"on"}),n.dispatch({type:"user_media",value:{id:"me",type:"screenshare",status:"on"}}),document.getElementById("screenshare").src="/static/media/screenshare-on.44d81ce8.svg"):"TypeError"==e.name||"TypeError"==e.name?console.log("TypeError"):console.log("Error: "+e.name)}))}},{key:"updatePeerPosition",value:function(e,t){setTimeout((function a(){var n=document.getElementById("screen_"+e);n?(n.style.left=t.x+"px",n.style.top=t.y+"px"):setTimeout(a,100)}),100)}},{key:"updateMyPosition",value:function(e){var t=document.getElementById("screen_me");t&&(e||(e=this.myPosition),t.style.left=e.x+"px",t.style.top=e.y+"px",this.myPosition=e,this.client.sendPeerMessage({room:this.roomName},"set_peer_position",{id:this.client.getId(),position:this.myPosition}))}}]),e}();Y._instance=null;var H=Y,G=(a(124),o.a.memo((function(e){return o.a.createElement("img",{id:e.id,"data-v-2f32af68":"",className:"stopvideo pointer has-tooltip",src:e[e.status],alt:e.alt,title:e.alt,onClick:function(){e.onClick&&"no"!==e.status&&e.onClick()}})}))),Z=a(62),ee=a.n(Z);var te=function(e){var t=Object(s.b)(),a=Object(n.useState)(""),r=Object(k.a)(a,2),i=r[0],c=r[1],l=Object(n.useState)(!1),u=Object(k.a)(l,2),m=u[0],d=u[1],v=function(e){if(!1!==function(e){return!!e.match(/^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/)&&RegExp.$1}(i.value))d(!0);else{d(!1);var t=document.getElementsByClassName("input-text");t[0].className+=" error",t[0].textContent="Incorrect link"}};return o.a.createElement("div",{"data-v-6a2f6b36":"","data-v-6e496afa":"",id:"videodialog","aria-expanded":"true","data-modal":"add-youtube",className:"add-youtube-modal v--modal-overlay customDlgPos"},o.a.createElement("div",{className:"v--modal-background-click"},o.a.createElement("div",{className:"v--modal-top-right"}),o.a.createElement("div",{role:"dialog","aria-modal":"true",className:"v--modal-box modal videodialog"},o.a.createElement("img",{"data-v-6a2f6b36":!0,className:"logo",src:ee.a,alt:"youtube.svg"}),o.a.createElement("div",{"data-v-6a2f6b36":"",className:"input-text"},"YouTube video link"),o.a.createElement("input",{"data-v-6a2f6b36":"",type:"text",name:"video",className:"url",ref:function(e){return c(e)},onChange:function(e){return v()}}),o.a.createElement("div",{"data-v-6a2f6b36":"",className:"buttons"},o.a.createElement("input",{"data-v-6a2f6b36":"",type:"button",value:"CANCEL",className:"cancel",onClick:function(e){window.$("#videodialog").plainModal("close")}}),o.a.createElement("input",{"data-v-6a2f6b36":"",type:"submit",value:"OK",className:"ok",onClick:function(e){return function(e){var a=document.getElementsByClassName("input-text");a[0].textContent="YouTube video link",a[0].className=a[0].className.replace(/\berror\b/g,"");var n=function(e){var t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[2].length?t[2]:null}(i.value);t({type:"youtube_add",value:{name:n,id:"me",username:"Me",value:n,videoplay:!0,curtime:0,timechange:!1}}),H.getInstance().youtubeAdd({videoId:n,name:n,curtime:0,timechange:!1}),i.value="",window.$("#videodialog").plainModal("close")}()},disabled:!m})))))},ae=a(63),ne=a.n(ae);var oe=function(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)(!0),l=Object(k.a)(c,2),u=l[0],m=l[1],d=Object(n.useState)(""),v=Object(k.a)(d,2),f=v[0],g=v[1],p=Object(s.b)(),b=function(e){var t=document.getElementsByClassName("label");ne()(e.target.value)||function(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(),404!==t.status}(e.target.value)?(t[0].className=t[0].className.replace(/\berror\b/g,""),t[0].textContent="Image link",i(e.target.value),g(e.target.value)):(t[0].className+=" error",t[0].textContent="Incorrect link")},h=o.a.createElement("div",{"data-v-bd733764":"",className:"upload-computer tab-active drop-zone","data-id":"upload1"},o.a.createElement("div",{"data-v-bd733764":"",className:"bold"},"Drag and drop, paste image here"),o.a.createElement("div",{"data-v-bd733764":"",className:"gray"},"or"),o.a.createElement("input",{type:"file",name:"file-4",id:"file-4",className:"inputfile",onChange:function(e){return function(e){var t=new FileReader;g(e.target.files[0].name),t.onloadend=function(){i(t.result)},t.readAsDataURL(e.target.files[0])}(e)}}),o.a.createElement("label",{htmlFor:"file-4"},"BROWSE...")),y=o.a.createElement("div",{"data-v-bd733764":"",className:"preview"},o.a.createElement("img",{className:"imgPreview",src:r,height:"200",alt:"preview..."})),E=o.a.createElement("div",{"data-v-bd733764":"",className:"upload-link"},o.a.createElement("div",{"data-v-bd733764":"",className:"label"},"Image link"),o.a.createElement("input",{"data-v-bd733764":"",type:"text",className:"link",onChange:function(e){return b(e)}}));return o.a.createElement("div",{"data-v-bd733764":"","data-v-6e496afa":"",id:"imagedialog","aria-expanded":"true","data-modal":"add-image",className:"add-image-modal v--modal-overlay customDlgPos"},o.a.createElement("div",{className:"v--modal-background-click"},o.a.createElement("div",{className:"v--modal-top-right"}),o.a.createElement("div",{role:"dialog","aria-modal":"true",className:"v--modal-box modal imagedialog"},o.a.createElement("div",{"data-v-bd733764":"",className:"header"},o.a.createElement("button",{"data-v-bd733764":"","data-id":"upload1",className:"image_upload active",onClick:function(e){return function(e){m(!0);var t=document.getElementsByClassName("image_upload"),a=document.getElementsByClassName("image_link");a[0].className=a[0].className.replace(/\bactive\b/g,""),t[0].className+=" active"}()}},"Upload"),o.a.createElement("button",{"data-v-bd733764":"","data-id":"upload2",className:"image_link",onClick:function(e){return function(e){m(!1);var t=document.getElementsByClassName("image_upload"),a=document.getElementsByClassName("image_link");t[0].className=t[0].className.replace(/\bactive\b/g,""),a[0].className+=" active"}()}},"URL")),u&&r?y:u&&!r?h:null,!u&&r?y:u||r?null:E,o.a.createElement("div",{"data-v-bd733764":"",className:"buttons"},o.a.createElement("input",{"data-v-bd733764":"",type:"button",value:"CANCEL",className:"cancel",onClick:function(e){return e.preventDefault(),window.$("#imagedialog").plainModal("close"),void i(null)}}),r&&o.a.createElement("input",{"data-v-bd733764":"",type:"submit",value:"OK",className:"ok",onClick:function(e){return p({type:"image_add",value:{name:f,id:"me",username:"Me",value:r}}),H.getInstance().imageAdd({imageId:r,imageName:f}),i(null),void window.$("#imagedialog").plainModal("close")}})))))},re=a(64),ie=a.n(re),ce=a(30),se=a.n(ce),le=a(31),ue=a.n(le),me=a(40),de=a.n(me),ve=a(65),fe=a.n(ve),ge=a(66),pe=a.n(ge),be=a(41),he=a.n(be),ye=a(67),Ee=a.n(ye),we=a(42),Ne=a.n(we),Oe=a(68),ke=a.n(Oe),je=a(69),Se=a.n(je),Ie=(a(141),o.a.memo((function(e){var t=Object(s.b)(),a=Object(s.c)((function(e){return e.users})),n=Object(s.c)((function(e){return e.buttons.camera})),r=Object(s.c)((function(e){return e.buttons.mic})),i=Object(s.c)((function(e){return e.buttons.screenshare})),c=function(e,a){t({type:e,value:"on"===a?"off":"on"}),"click_camera"===e?(t({type:"user_media",value:{id:"me",type:"camera",status:"on"===a?"off":"on"}}),H.getInstance().toggleCamera("off"===a)):"click_mic"===e?(t({type:"user_media",value:{id:"me",type:"mic",status:"on"===a?"off":"on"}}),H.getInstance().toggleMic("off"===a)):"click_screenshare"===e&&(t({type:"user_media",value:{id:"me",type:"screenshare",status:"on"===a?"off":"on"}}),H.getInstance().toggleScreenShare("off"===a))};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{"data-v-2db9ff64":"",className:"app-header","data-v-12a888fb":""},o.a.createElement("a",{"data-v-2db9ff64":"",href:"/",target:"_blank"},o.a.createElement("img",{"data-v-2db9ff64":"",className:"logo",src:z.a,alt:"logosvg",style:{display:"none"}}),o.a.createElement("img",{"data-v-2db9ff64":"",className:"logo-small",src:L.a,alt:"logosmallsvg",style:{display:"none"}})),o.a.createElement("div",{"data-v-2f32af68":"",className:"controls"},o.a.createElement("div",{"data-v-2f32af68":"",className:"controls-main"},o.a.createElement("div",{"data-v-261ef19f":"","data-v-2f32af68":"",className:"members-container"},o.a.createElement("div",{"data-v-2f32af68":"","data-v-261ef19f":"",className:"members cus-dropdown"},o.a.createElement("img",{"data-v-2f32af68":"",src:ie.a,alt:"userssvg"}),o.a.createElement("span",{"data-v-2f32af68":"","data-v-261ef19f":""},a.length),o.a.createElement("div",{"data-v-261ef19f":"",className:"cus-dropdown-content"},a.map((function(e){return"me"!==e.id?o.a.createElement("span",{key:e.id},e.name):null}))))),o.a.createElement(G,{on:se.a,off:se.a,no:se.a,alt:"Youtube",status:"on",onClick:function(){O.show("videodialog")}}),o.a.createElement(G,{on:ue.a,off:ue.a,no:ue.a,alt:"Uploadimage",status:"on",onClick:function(){O.show("imagedialog")}}),o.a.createElement(G,{on:de.a,off:fe.a,no:de.a,id:"screenshare",alt:"Screenshare",status:i,onClick:function(){return c("click_screenshare",i)}}),o.a.createElement(G,{on:pe.a,off:he.a,no:he.a,alt:"Camera",status:n,onClick:function(){return c("click_camera",n)}}),o.a.createElement(G,{on:Ee.a,off:Ne.a,no:Ne.a,alt:"Mic",status:r,onClick:function(){return c("click_mic",r)}})),o.a.createElement("a",{"data-v-2f32af68":"",href:"mailto:support@spatial.chat",className:"support-link"},o.a.createElement("img",{"data-v-2f32af68":"",className:"support has-tooltip",src:ke.a,alt:"support"})),o.a.createElement("img",{"data-v-2f32af68":"",className:"close pointer",src:Se.a,alt:"close",onClick:function(t){return e.onSetUserClose(!0),void(0===e.videoObj.length&&0===e.imageObj.length&&(H.getInstance().closeClient(),window.location.href="/room?space="+H.getInstance().roomName))}}))),o.a.createElement(te,null),o.a.createElement(oe,null))}))),xe=a(79),Ce=a(27),_e=a.n(Ce),Me=(a(145),{obj:null,x:0,y:0,scale:1,dragStarted:!1}),Pe=o.a.memo((function(e){var t=o.a.useRef(null),a=Object(s.c)((function(e){return e.buttons.screenshare})),r="screen_"+e.user.id;function i(){var t=document.getElementById("screen_me"),a=document.getElementById("screen_"+e.user.id);if(t&&a){var n={x:parseFloat(t.style.left),y:parseFloat(t.style.top)},o={x:parseFloat(a.style.left),y:parseFloat(a.style.top)},r=Math.max(1,Math.sqrt((n.x-o.x)*(n.x-o.x)+(n.y-o.y)*(n.y-o.y))),c=Math.max(.3,Math.min(1,150/r));a.style.transform="translate(-50px, -50px) scale(".concat(c,")");var s=Math.max(.01,Math.min(1,Math.pow(200/r,4)));a.firstElementChild.volume=isFinite(s)?s:1}setTimeout(i,300)}Object(n.useEffect)((function(){var t=document.getElementById(e.user.stream.id);t&&(window.easyrtc.setVideoObjectSrc(t,e.user.stream),"me"===e.user.id?(t.parentElement.parentElement.parentElement.removeEventListener("mousedown",c),t.parentElement.parentElement.parentElement.addEventListener("mousedown",c),t.parentElement.parentElement.parentElement.removeEventListener("mousemove",l),t.parentElement.parentElement.parentElement.addEventListener("mousemove",l),t.parentElement.parentElement.parentElement.removeEventListener("mouseup",u),t.parentElement.parentElement.parentElement.addEventListener("mouseup",u)):setTimeout(i,500))}),[]);var c=function(e){if(1===e.buttons&&0===e.button){var t=document.elementFromPoint(e.x,e.y);"VIDEO"===t.tagName&&"screen_me"===t.parentElement.id&&(Me.obj=t.parentElement,Me.x=e.x,Me.y=e.y,Me.dragStarted=!0,Me.scale=function(e){if(!e)return 1;var t=e.split("("),a=t[t.length-1].split(")");return parseFloat(a[0])}(document.getElementById("videoFrame").parentElement.parentElement.style.transform),e.stopPropagation())}},l=function(e){if(Me.dragStarted){var t=H.getInstance().myPosition.x+(e.x-Me.x)/Me.scale,a=H.getInstance().myPosition.y+(e.y-Me.y)/Me.scale;Me.obj.style.left=t+"px",Me.obj.style.top=a+"px",e.stopPropagation()}},u=function(e){Me.dragStarted&&(H.getInstance().myPosition.x+=(e.x-Me.x)/Me.scale,H.getInstance().myPosition.y+=(e.y-Me.y)/Me.scale,H.getInstance().updateMyPosition(),e.stopPropagation()),Me.dragStarted=!1},m=o.a.createElement("div",{ref:t,id:r,"data-tip":!0,"data-for":e.user.id,key:e.user.id,className:"screen",style:{width:"me"===e.user.id?600:100,height:"me"===e.user.id?345:100,zIndex:"me"===e.user.id?50:25,borderRadius:"me"===e.user.id?0:"50%"},tabIndex:0,onDoubleClick:function(){return document.getElementById(r).requestFullscreen()}},o.a.createElement("video",{className:"video",id:e.user.stream.id,controls:"",loop:"",muted:"me"===e.user.id,style:{width:"me"===e.user.id?"100%":"initial",height:"me"===e.user.id?"100%":"120%",transform:"me"===e.user.id?"none":"translate(-20%, -10%) scaleX(1)"}})),d=o.a.createElement("div",{ref:t,id:r,"data-tip":!0,"data-for":e.user.id,key:e.user.id,className:"screen",style:{width:e.user.width,height:e.user.height,zIndex:"me"===e.user.id?50:25,borderRadius:"50%"},tabIndex:0,onDoubleClick:function(){return document.getElementById(r).requestFullscreen()}},o.a.createElement("video",{className:"video",id:e.user.stream.id,controls:"",loop:"",muted:"me"===e.user.id}));return o.a.createElement(o.a.Fragment,null,o.a.createElement(_e.a,{nodeRef:t,position:{x:-50,y:-50},disabled:!0,scale:e.cur},"off"===a?m:d),o.a.createElement(xe.a,{id:e.user.id,type:"info",overridePosition:function(t){var a=t.left,n=t.top;return a/=e.cur,{top:n/=e.cur,left:a}}},o.a.createElement("span",null,e.user.name)))})),De=a(70),Te=(a(157),a(43)),Re=a.n(Te),Fe=a(73),Be=a.n(Fe),Ae=a(28),ze=a.n(Ae),Ve=function(e){var t,a=o.a.useRef(null),r=Object(n.useRef)(null),i=Object(n.useState)("off"),c=Object(k.a)(i,2),l=c[0],u=c[1],m=Object(s.b)(),d="youtubeAudio_"+e.video.value,v="video_"+e.video.value;function f(){var t=document.getElementById("screen_me"),a=document.getElementById("video_"+e.video.value);if(t&&a&&a.style.transform){var n={x:parseFloat(t.style.left),y:parseFloat(t.style.top)},o=a.style.transform.match(/[+-]?\d+/g),i={x:parseInt(o[0])+191,y:parseInt(o[1])+107},c=Math.sqrt((n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y)),s=Math.max(.01,Math.min(1,Math.pow(200/c,4)));r&&r.current&&r.current.internalPlayer.setVolume(100*s*("on"===a.muted||void 0===a.muted?1:0))}setTimeout(f,1e3)}Object(n.useEffect)((function(){setTimeout(f,500)}),[]);t=e.video.curtime,r&&r.current&&r.current.internalPlayer.seekTo(t,!1);if(a.current&&e.video.transform&&(a.current.style.transform=e.video.transform),r.current&&(e.video.videoplay?r.current.internalPlayer.playVideo():r.current.internalPlayer.pauseVideo()),e.userClose){if("me"===e.video.id){var g=e.video.value;m({type:"youtube_remove",closeVal:g}),H.getInstance().youtubeRemove({value:g})}H.getInstance().closeClient(),window.location.href="/room?space="+e.room}return o.a.createElement(_e.a,{nodeRef:a,scale:e.cur,defaultPosition:{x:-180,y:-100},disabled:"me"!==e.video.id,onStart:function(e){m({type:"backgound_moving",value:{bgMoving:!0}})},onStop:function(t){return m({type:"backgound_moving",value:{bgMoving:!1}}),m({type:"youtube_position",value:{id:"me",transform:a.current.style.transform}}),void H.getInstance().youtubePosition({transform:a.current.style.transform,name:e.video.name})}},o.a.createElement("div",{"data-v-c1f79ed4":"","data-v-6e496afa":"","data-v-7e3fe256":"",ref:a,key:e.video.id,id:v,className:"youtube-el youtube-frame",style:{transform:e.video.transform,zIndex:"me"===e.video.id?10:5}},o.a.createElement("div",{"data-v-a995c326":"","data-v-c1f79ed4":"",className:"header pointer hidden"},o.a.createElement("div",{"data-v-a995c326":"",className:"title"},"Pinned by ",e.video.username),"me"===e.video.id&&o.a.createElement("div",{onClick:function(){return t=e.video.value,m({type:"youtube_remove",value:t}),void H.getInstance().youtubeRemove({value:t});var t}},o.a.createElement("img",{"data-v-6a2f6b36":!0,className:"close",src:ze.a,alt:"closevideo.svg"}))),o.a.createElement("div",{"data-v-c1f79ed4":"",className:"player ".concat("me"===e.video.id?null:"pointer-events-none")},o.a.createElement(De.a,{ref:r,videoId:e.video.value,opts:{width:380,height:190,playerVars:{autoplay:0}},onPlay:"me"===e.video.id?function(t){H.getInstance().youtubePlay({name:e.video.name,videoplay:!0})}:null,onPause:"me"===e.video.id?function(a){return H.getInstance().youtubePlay({name:e.video.name,videoplay:!1}),void H.getInstance().youtubePosition({curtime:t,name:e.video.name,timechange:!1})}:null,onStateChange:"me"===e.video.id?function(a){e.video.timechange||"me"!==e.video.id||(t=r.current.internalPlayer.getCurrentTime()).then((function(t){H.getInstance().youtubePosition({curtime:t,name:e.video.name,timechange:!0})}))}:null})),"me"===e.video.id?null:o.a.createElement("img",{"data-v-c1f79ed4":"",id:d,"svg-inline":"",src:Re.a,className:"mute",onClick:function(t){return function(t){var a=document.getElementById("video_"+e.video.value);"on"===l?r.current&&(document.getElementById(d).src=Re.a,u("off"),a.muted="on"):r.current&&(document.getElementById(d).src=Be.a,a.muted="off",u("on"))}()},alt:"youtubeAudio"})))},Le=a(74),Ue=(a(160),function(e){var t=o.a.useRef(null),a=Object(s.b)();if(t.current&&e.image.transform&&(t.current.parentNode.style.transform=e.image.transform),e.userClose){if("me"===e.image.id){var r=e.image.value;a({type:"image_remove",closeVal:r}),H.getInstance().imageRemove({value:r})}H.getInstance().closeClient(),window.location.href="/room?space="+e.room}var i=Object(n.useState)(275),c=Object(k.a)(i,2),l=c[0],u=c[1],m=Object(n.useState)(183),d=Object(k.a)(m,2),v=d[0],f=d[1],g=Object(n.useState)(-135),p=Object(k.a)(g,2),b=p[0],h=p[1],y=Object(n.useState)(-100),E=Object(k.a)(y,2),w=E[0],N=E[1];return o.a.createElement(Le.a,{noderef:t,size:{width:l,height:v},position:{x:b,y:w},onDragStart:function(e){a({type:"backgound_moving",value:{bgMoving:!0}})},onDragStop:function(n,o){h(o.x),N(o.y),a({type:"backgound_moving",value:{bgMoving:!1}}),a({type:"image_position",value:{id:"me",transform:t.current.parentNode.style.transform}}),H.getInstance().imagePosition({transform:t.current.parentNode.style.transform,name:e.image.name})},scale:e.cur,style:{zIndex:"me"===e.image.id?10:5},onResizeStop:function(e,t,a,n,o){u(a.style.width),f(a.style.height)},disableDragging:"me"!==e.image.id},o.a.createElement("div",{ref:t,key:e.image.id,style:{width:"100%"}},o.a.createElement("div",{className:"cus_header pointer hidden"},o.a.createElement("div",{className:"cus_title"},"Pinned by ",e.image.username),"me"===e.image.id&&o.a.createElement("div",{onClick:function(){return t=e.image.value,a({type:"image_remove",value:t}),void H.getInstance().imageRemove({value:t});var t},className:"cus_close"},o.a.createElement("img",{"data-v-6a2f6b36":!0,src:ze.a,alt:"closevideo.svg"}))),o.a.createElement("img",{src:e.image.value,className:"uploadedimage",alt:"map-transparent"})))});var Qe=function(e){var t=Object(s.b)(),a=B.parse(e.location.search),r=Object(s.c)((function(e){return e.users})),i=Object(s.c)((function(e){return e.screens.bgMoving})),c=Object(s.c)((function(e){return e.screens.videos})),l=Object(s.c)((function(e){return e.screens.images}));Object(n.useEffect)((function(){console.log("sdasdsad");window.localStorage.getItem("userName");H.getInstance().startConference(t,null,a.space,a.uname)}),[]);var u=Object(n.useState)(-1e3),m=Object(k.a)(u,2),d=m[0],v=m[1],f=Object(n.useState)(-1e3),g=Object(k.a)(f,2),p=g[0],b=g[1],h=Object(n.useState)(-1e3),y=Object(k.a)(h,2),E=y[0],w=y[1],N=Object(n.useState)(1),O=Object(k.a)(N,2),j=O[0],S=O[1],I=Object(n.useState)(!1),x=Object(k.a)(I,2),C=x[0],_=x[1];return o.a.createElement("div",{"data-v-12a888fb":"",className:"space"},o.a.createElement(Ie,{onSetUserClose:function(e){_(e)},videoObj:c,imageObj:l,spaceName:"tryme"}),o.a.createElement("div",{"data-v-6e496afa":"","data-v-12a888fb":"",className:"session",style:{}},o.a.createElement("div",{className:"small-map-background",style:{transform:"translate3d("+d+"px, "+d+"px, "+d+"px)"}}),o.a.createElement(K.b,{defaultScale:1,wheel:{step:100},pan:{paddingSize:0},scalePadding:{size:0},options:{disabled:!1,centerContent:!0,limitToBounds:!0,maxScale:3},onWheel:function(e){return function(e){var t;t=e.previousScale<e.scale?2:-2,e.scale!==e.options.maxScale&&e.scale!==e.options.minScale||(t=0),S(e.scale),v(d+e.scale*t),b(p+e.scale*t),w(E+e.scale*t)}(e)},doubleClick:{disabled:!0},onPanning:function(e){e.options.disabled=i.bgMoving}},o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,null,o.a.createElement("div",{"data-v-7e3fe256":"",className:"back map-background"},o.a.createElement("div",{className:"videoFrame",id:"videoFrame"},r.map((function(e){return o.a.createElement(Pe,{key:e.id,cur:j,user:e})})),c.map((function(e){return o.a.createElement(Ve,{key:e.name,video:e,cur:j,userClose:C,room:a.space})})),l.map((function(e){return o.a.createElement(Ue,{key:e.value,image:e,cur:j,userClose:C,room:a.space})})))))))))};var $e=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(y.a,null,o.a.createElement(E.c,null,o.a.createElement(E.a,{path:"/login",component:T}),o.a.createElement(E.a,{path:"/room",component:$}),o.a.createElement(E.a,{path:"/conference",component:Qe}),o.a.createElement(E.a,{path:"/",component:T}))))},Ke=Object(c.c)(h,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(o.a.createElement(s.a,{store:Ke},o.a.createElement(o.a.StrictMode,null,o.a.createElement($e,null))),document.getElementById("root"))},20:function(e,t,a){},25:function(e,t,a){e.exports=a.p+"static/media/logo.da4bdda8.svg"},26:function(e,t,a){e.exports=a.p+"static/media/logo-small.e1cf996c.svg"},28:function(e,t,a){e.exports=a.p+"static/media/closevideo.7b864b90.svg"},30:function(e,t,a){e.exports=a.p+"static/media/youtube.43fef7ea.svg"},31:function(e,t,a){e.exports=a.p+"static/media/uploadimage.a7edbc9b.svg"},40:function(e,t,a){e.exports=a.p+"static/media/screenshare-on.44d81ce8.svg"},41:function(e,t,a){e.exports=a.p+"static/media/stopvideo-1.e529fa66.svg"},42:function(e,t,a){e.exports=a.p+"static/media/stopaudio-1.7268da01.svg"},43:function(e,t,a){e.exports=a.p+"static/media/mic-mute.9a8a5f6e.svg"},48:function(e,t,a){},57:function(e,t,a){e.exports=a.p+"static/media/success.e50007f4.svg"},58:function(e,t,a){e.exports=a.p+"static/media/error.c4f7f08f.svg"},60:function(e,t,a){e.exports=a.p+"static/media/joinbtn.d5e1ecf0.svg"},62:function(e,t,a){e.exports=a.p+"static/media/youtube1.3933bad6.svg"},64:function(e,t,a){e.exports=a.p+"static/media/users.78454788.svg"},65:function(e,t,a){e.exports=a.p+"static/media/screenshare-off.341a9dd8.svg"},66:function(e,t,a){e.exports=a.p+"static/media/stopvideo-0.34d55c9b.svg"},67:function(e,t,a){e.exports=a.p+"static/media/stopaudio-0.e55d1c5b.svg"},68:function(e,t,a){e.exports=a.p+"static/media/support.dc413a12.svg"},69:function(e,t,a){e.exports=a.p+"static/media/close.81170d04.svg"},73:function(e,t,a){e.exports=a.p+"static/media/mic-mute1.c0d28aa1.svg"},80:function(e,t,a){e.exports=a(162)},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){e.exports=a.p+"static/media/logo-mark.8e118226.svg"}},[[80,1,2]]]);
//# sourceMappingURL=main.3abd71c2.chunk.js.map